{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A population pyramid for the US in 2000, created using stack. See https://vega.github.io/vega-lite/examples/concat_population_pyramid.html for a variant of this created using concat.",
    "data": { "url": "https://raw.githubusercontent.com/zyon0007/Billionaires/main/data/diverging_stacked_bar_chart.csv"},
    "transform": [
      {"calculate": "datum.Gender == 'Female' ? 'Female' : 'Male'", "as": "Gender"},
      {"calculate": "datum.Gender == 'Female' ? -datum.Count : datum.Count", "as": "ageGroupCount"}
    ],
    "width": 300,
    "height": 200,
    "mark": "bar",
    "encoding": {
      "y": {
        "field": "Age Group",
        "axis": null, "sort": "descending"
      },
      "x": {
        "aggregate": "sum", "field": "ageGroupCount",
        "title": "Age Group Count"
      },
      "color": {
        "field": "Gender",
        "scale": {"range": ["#FAAFBA", "#89CFF0"]},
        "legend": {"orient": "top", "title": null}
      },
      "tooltip": [
        {
            "field": "Gender", 
            "type": "nominal", 
            "title": "Gender"
        },
        {
          "field": "Age Group", 
          "type": "nominal", 
          "title": "Age Group"
        },
        {
          "field": "ageGroupCount",
          "type": "quantitative",
          "title": "Age Group Count",
          "formatType": "abs"
        }
        ]
    },
    "config": {
      "view": {"stroke": null},
      "axis": {"grid": false}
    }
  }